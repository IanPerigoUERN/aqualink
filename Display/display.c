
#include "display.h"
volatile int menu_index = 0;
const uint I2C_SDA = 14;
const uint I2C_SCL = 15;

uint8_t ssd[ssd1306_buffer_length];
struct render_area frame_area;

void ConfigDisplay(){
    i2c_init(i2c1, ssd1306_i2c_clock * 1000);
    gpio_set_function(I2C_SDA, GPIO_FUNC_I2C);
    gpio_set_function(I2C_SCL, GPIO_FUNC_I2C);
    gpio_pull_up(I2C_SDA);
    gpio_pull_up(I2C_SCL);

    ssd1306_init();

    // Preparar área de renderização para o display
    frame_area = (struct render_area){
        .start_column = 0,
        .end_column = ssd1306_width - 1,
        .start_page = 0,
        .end_page = ssd1306_n_pages - 1
    };

    calculate_render_area_buffer_length(&frame_area);

    // zera o display inteiro
     //uint8_t ssd[ssd1306_buffer_length];
    memset(ssd, 0, ssd1306_buffer_length);
    render_on_display(ssd, &frame_area);

//restart:

}

void DisplayInit() {
    ConfigDisplay();
    
    char *text[] = {
       "  Iniciando   ",
       "  Sistema  ",
       };

   int y = 0;
   for (uint i = 0; i < count_of(text); i++)
   {
       ssd1306_draw_string(ssd, 5, y, text[i]);
       y += 8;
   }
   render_on_display(ssd, &frame_area);
}

void DisplayConectando() {
    ConfigDisplay();
    
    char *text[] = {
       "  CONECTANDO   ",
       "  AO WI FI ",
        };

   int y = 0;
   for (uint i = 0; i < count_of(text); i++)
   {
       ssd1306_draw_string(ssd, 5, y, text[i]);
       y += 8;
   }
   render_on_display(ssd, &frame_area);
}

void DisplayConectado() {
    ConfigDisplay();
    
    char *text[] = {
       "  CONECTADO   ",
      };

   int y = 0;
   for (uint i = 0; i < count_of(text); i++)
   {
       ssd1306_draw_string(ssd, 5, y, text[i]);
       y += 8;
   }
   render_on_display(ssd, &frame_area);
}

void DisplayFalha() {
    ConfigDisplay();
    
    char *text[] = {
       "  FALHA   ",
       "  AO  ",
       "  CONECTAR  ", 
       "  NO WI FI  "};

   int y = 0;
   for (uint i = 0; i < count_of(text); i++)
   {
       ssd1306_draw_string(ssd, 5, y, text[i]);
       y += 8;
   }
   render_on_display(ssd, &frame_area);
}

void DisplayLogo(){
    ConfigDisplay();
const uint8_t bitmap_desenho[] = {
    0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0x3f, 0xfe, 0xff, 0xfc, 0xff, 0xff, 0xff, 0xff, 0x1f, 0xfe, 0x7f, 0xf8, 0xff, 
	0xff, 0xc7, 0xff, 0x1f, 0xfc, 0x7f, 0xf0, 0xff, 0xff, 0x83, 0xff, 0xcf, 0xfc, 0x3f, 0xf3, 0xff, 
	0xff, 0x80, 0xff, 0xcf, 0xfd, 0x3f, 0xf7, 0xff, 0x7f, 0x80, 0xff, 0xcf, 0x3d, 0x80, 0xf7, 0xff, 
	0x7f, 0x80, 0xff, 0xcf, 0x3d, 0x80, 0xf7, 0xff, 0x7f, 0xe0, 0xff, 0xcf, 0x3d, 0x3f, 0xf7, 0xff, 
	0x7f, 0xe4, 0xff, 0xdf, 0x3c, 0x3f, 0xf3, 0xff, 0x7f, 0xe4, 0xff, 0x1f, 0x3c, 0x7f, 0xf0, 0xff, 
	0x7f, 0xc0, 0xff, 0x1f, 0x3e, 0x7f, 0xf8, 0xff, 0x7f, 0x80, 0xff, 0x3f, 0x3f, 0xff, 0xfc, 0xff, 
	0xff, 0x80, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0x81, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 
	0xff, 0x83, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 
	0xff, 0xc0, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 0x7f, 0xc0, 0xff, 0x7f, 0x3f, 0xff, 0xff, 0xff, 
	0x7f, 0x80, 0xff, 0x7f, 0x3f, 0xff, 0xe3, 0xff, 0x7f, 0x00, 0xff, 0x7f, 0x3f, 0xff, 0xc3, 0xff, 
	0x7f, 0x1e, 0xff, 0x7f, 0x3f, 0xff, 0xc9, 0xff, 0x7f, 0x1e, 0xff, 0x7f, 0x3f, 0xff, 0x99, 0xff, 
	0x7f, 0x1c, 0xff, 0x7f, 0x3f, 0xff, 0x9d, 0xff, 0x7f, 0x80, 0xff, 0x7f, 0x3f, 0xff, 0xbd, 0xff, 
	0x7f, 0x80, 0xff, 0x7f, 0x3f, 0xff, 0x9d, 0xff, 0xff, 0xc0, 0xff, 0x7f, 0x3f, 0xff, 0x9d, 0xff, 
	0xff, 0xc0, 0xff, 0x7f, 0x3f, 0xff, 0x99, 0xff, 0xff, 0xe1, 0xff, 0x7f, 0x3f, 0xff, 0xc3, 0xff, 
	0xff, 0xff, 0xff, 0x7f, 0x3f, 0xff, 0xc3, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0xff, 0xe7, 0xff, 
	0x7f, 0xc0, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0x7f, 0xc0, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 
	0x7f, 0x80, 0xff, 0xff, 0xff, 0xff, 0xe7, 0xff, 0x7f, 0x80, 0x7f, 0x00, 0x00, 0xf8, 0xe7, 0xff, 
	0xff, 0x80, 0x1f, 0x00, 0x00, 0xf0, 0xe7, 0xff, 0xff, 0x9f, 0x1f, 0x00, 0x00, 0xe0, 0xe7, 0xff, 
	0xff, 0x9f, 0x1f, 0x00, 0x00, 0xe0, 0xe7, 0xff, 0xff, 0x80, 0x0f, 0x00, 0x00, 0x60, 0xe0, 0xff, 
	0x7f, 0x80, 0x0f, 0xf8, 0x7f, 0x40, 0xe0, 0xff, 0x7f, 0x80, 0x0f, 0xf8, 0x7f, 0x40, 0xf0, 0xff, 
	0x7f, 0xc0, 0x0f, 0xf8, 0x7f, 0xc0, 0xff, 0xff, 0x7f, 0xc0, 0x0f, 0xf8, 0x7f, 0xc0, 0xff, 0xff, 
	0xff, 0xff, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xff, 0xff, 0xff, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xff, 
	0xff, 0x87, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x81, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xff, 
	0xff, 0x80, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xff, 0x7f, 0x80, 0x0f, 0x00, 0x1e, 0xc0, 0xff, 0xff, 
	0x7f, 0x80, 0x0f, 0x00, 0x3e, 0xc0, 0xff, 0xff, 0x7f, 0xe4, 0x0f, 0x00, 0x3f, 0xc0, 0xff, 0xff, 
	0x7f, 0xe4, 0x0f, 0x00, 0x73, 0xc0, 0xff, 0xff, 0x7f, 0xe0, 0x0f, 0x80, 0x63, 0xc0, 0xff, 0xf1, 
	0x7f, 0x80, 0x0f, 0x80, 0x61, 0xc0, 0xff, 0xe1, 0x7f, 0x80, 0x0f, 0x80, 0x61, 0xc0, 0xff, 0xe0, 
	0xff, 0x80, 0x0f, 0x80, 0x41, 0xc0, 0xff, 0xec, 0xff, 0x81, 0x0f, 0x80, 0x41, 0xc0, 0x7f, 0xce, 
	0xff, 0x87, 0x0f, 0x80, 0x61, 0x40, 0x00, 0xce, 0xff, 0xff, 0x0f, 0x80, 0x61, 0x40, 0x00, 0xce, 
	0xff, 0xff, 0x0f, 0x80, 0x61, 0xc0, 0xff, 0xce, 0xff, 0xff, 0x0f, 0x80, 0x73, 0xc0, 0xff, 0xec, 
	0xff, 0xff, 0x0f, 0x00, 0x3f, 0xc0, 0xff, 0xe0, 0xff, 0xff, 0x0f, 0x08, 0x3f, 0xc0, 0xff, 0xe1, 
	0xff, 0xff, 0x0f, 0x08, 0x1e, 0xc0, 0xff, 0xf3, 0xff, 0x80, 0x0f, 0x0c, 0x08, 0xc0, 0xff, 0xff, 
	0x7f, 0x80, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xff, 0x7f, 0x80, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xff, 
	0x7f, 0x80, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xff, 0x7f, 0x80, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xff, 
	0xff, 0x9f, 0x0f, 0x1c, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x9f, 0x0f, 0xfc, 0x7f, 0xc0, 0xff, 0xff, 
	0xff, 0x87, 0x0f, 0xfc, 0x7f, 0xc0, 0xff, 0xff, 0xff, 0x87, 0x0f, 0xfc, 0x7f, 0x40, 0x00, 0xf8, 
	0xff, 0x87, 0x0f, 0x0c, 0x00, 0x40, 0x00, 0xf8, 0xff, 0x87, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xfb, 
	0xff, 0x87, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xfb, 0xff, 0xff, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xfb, 
	0xff, 0xff, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xfb, 0x7f, 0x9e, 0x0f, 0x0c, 0x00, 0xc0, 0xff, 0xfb, 
	0x7f, 0x9e, 0x0f, 0x08, 0x00, 0xc0, 0xff, 0xfb, 0x7f, 0x80, 0x0f, 0x00, 0x00, 0xc0, 0xff, 0xfb, 
	0x7f, 0x80, 0x1f, 0x00, 0x00, 0xe0, 0xff, 0xfb, 0x7f, 0x80, 0x1f, 0x00, 0x00, 0xe0, 0xff, 0xfb, 
	0x7f, 0x80, 0x1f, 0x00, 0x00, 0xe0, 0xff, 0xfb, 0x7f, 0x80, 0x3f, 0x00, 0x00, 0xf0, 0xff, 0xfb, 
	0x7f, 0x8c, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfb, 0x7f, 0x9e, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfb, 
	0x7f, 0x9e, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfb, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xff, 0xff, 0xf3, 
	0xff, 0xff, 0xff, 0xff, 0xfe, 0xf9, 0xff, 0xe1, 0x7f, 0x80, 0xff, 0xff, 0xfe, 0xf9, 0xff, 0xe1, 
	0x7f, 0x80, 0xff, 0xff, 0xfe, 0xf9, 0xff, 0xcc, 0x7f, 0x80, 0xff, 0xff, 0xfe, 0xf9, 0xff, 0xce, 
	0x7f, 0x80, 0xff, 0xff, 0xfe, 0xf9, 0xf8, 0xce, 0xff, 0xc0, 0xff, 0xff, 0xfe, 0x79, 0xf0, 0xde, 
	0xff, 0xf0, 0xff, 0xff, 0xfe, 0x79, 0xf2, 0xce, 0xff, 0xf1, 0xff, 0xff, 0xfe, 0x79, 0xf7, 0xcc, 
	0xff, 0xe1, 0xff, 0xff, 0xfe, 0x01, 0xf7, 0xe0, 0x7f, 0x80, 0xff, 0xff, 0xfe, 0x01, 0xf7, 0xe1, 
	0x7f, 0x80, 0xff, 0xff, 0xfe, 0x01, 0xf7, 0xf1, 0x7f, 0x80, 0xff, 0xff, 0xfe, 0x7f, 0xf7, 0xff, 
	0x7f, 0x80, 0xff, 0xff, 0xfe, 0x7f, 0xf2, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x7f, 0xf0, 0xff, 
	0xff, 0xff, 0xff, 0xff, 0xfe, 0xff, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xff, 0xfd, 0xff, 
	0x7f, 0x80, 0xff, 0xff, 0xfe, 0xff, 0xff, 0xff, 0x7f, 0x80, 0xff, 0xff, 0xfe, 0xff, 0xff, 0xff, 
	0x7f, 0x80, 0xff, 0x7f, 0xfc, 0xff, 0xff, 0xff, 0x7f, 0x80, 0xff, 0x7f, 0xf8, 0xff, 0xff, 0xff, 
	0xff, 0xc0, 0xff, 0x3f, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xf3, 0xff, 0x3f, 0xf3, 0xff, 0xff, 0xff, 
	0xff, 0xf0, 0xff, 0xbf, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xff, 0xbf, 0xf3, 0xff, 0xff, 0xff, 
	0x7f, 0x80, 0xff, 0xbf, 0xf3, 0xff, 0xff, 0xff, 0x7f, 0x80, 0xff, 0xbf, 0xf3, 0xff, 0xff, 0xff, 
	0x7f, 0x82, 0xff, 0x3f, 0xfb, 0xff, 0xff, 0xff, 0x7f, 0x83, 0xff, 0x3f, 0xf8, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0x7f, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff

};

ssd1306_t ssd_bm;
ssd1306_init_bm(&ssd_bm, 128, 64, false, 0x3c, i2c1);
ssd1306_config(&ssd_bm);
ssd1306_draw_bitmap(&ssd_bm, bitmap_desenho);
}

